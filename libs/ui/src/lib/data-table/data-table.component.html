<form [formGroup]="formGroup">
  <table
    mat-table
    [dataSource]="dataSource"
    [formArrayName]="formMetadata?.arrayName!"
  >
    <ng-container *ngFor="let field of fieldMetadata" [matColumnDef]="field.id">
      <th mat-header-cell *matHeaderCellDef>{{ field.label }}</th>
      <td
        mat-cell
        *matCellDef="let row; let index = index"
        [formGroupName]="index"
        [style.width]="field.width?.lg"
      >
        <span [ngSwitch]="field.type">
          <ng-template ngSwitchCase="boolean">
            <ext-checkbox
              [control]="formGroup | formControl: field:index:arrayName"
            >
            </ext-checkbox>
          </ng-template>
          <!-- 
          <ng-template ngSwitchCase="string">
            <ext-input-text
              [fieldMetaData]="field"
              [control]="getControl(field.id, index)"
            >
            </ext-input-text>
          </ng-template>

          <ng-template ngSwitchCase="embedded-object">
            <ext-embedded-object
              [fieldMetaData]="field"
              [control]="getControl(field.id, index)"
            >
            </ext-embedded-object>
          </ng-template>

          <ng-template ngSwitchCase="color">
            <ext-color-picker
              [fieldMetaData]="field"
              [control]="getControl(field.id, index)"
            >
            </ext-color-picker>
          </ng-template>

          <ng-template ngSwitchCase="icon">
            <ext-svg-icon
              [fieldMetaData]="field"
              [control]="getControl(field.id, index)"
            >
            </ext-svg-icon>
          </ng-template>

          <ng-template ngSwitchCase="enum">
            <ext-enum
              [fieldMetaData]="field"
              [control]="getControl(field.id, index)"
            ></ext-enum>
          </ng-template> -->
        </span>
      </td>
    </ng-container>

    <!-- <ng-container matColumnDef="save">
      <th mat-header-cell *matHeaderCellDef>Save</th>
      <tr *matCellDef="let row; let index = index">
        <button>Save</button>
      </tr>
    </ng-container> -->

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; let i = index; columns: displayedColumns"
    ></tr>
  </table>

  <div fxLayoutAlign="start center">
    <!-- <button mat-stroked-button (click)="onAdd()">Add</button>
    <span fxFlex="2"></span>
    <button mat-stroked-button>Save</button> -->

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
    </mat-paginator>
    <span fxFlex></span>
  </div>
</form>
